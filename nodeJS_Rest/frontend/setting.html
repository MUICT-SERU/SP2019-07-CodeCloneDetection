<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<meta http-equiv="X-UA-Compatible" content="ie=edge">
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  	  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  		 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  		 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  		 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  		 <link href="styles.css" rel="stylesheet" />
  </head>
  <nav class="navbar navbar-expand-md navbar-light bg-light">
      <ul class="nav">
          <li class="nav-item">
              <a class="nav-link">
                <img src="/images/logo.png" alt="Merry's logo" style="width:70px;height:70px;">
              </a>
          </li>
        <li class="nav-item" style="padding-top:15%">
            <span class="nav-link" id="fake-link-1" style="color: blue;cursor: pointer;">Respositories</span>
        </li>
      </ul>
  <ul class="nav justify-content-end" id="menu" style="padding-left:83%">
    <li class="nav-item"id="ProPic">

    </li>
          <li class="nav-item">
              <b class="nav-link" id="logout-button" onclick="logoutFunc()" style="padding-top:35%">Logout</b>
          </li>
        </ul>
  </nav>
  <body>
<h1>This is setting page</h1>
  <label class="switch">
    <input type="checkbox">
    <span class="slider round"></span>
  </label>
  </body>
  <script>
    const query = window.location.search.substring(1)
  	const token = query.split('access_token=')[1]
    fetch('https://api.github.com/user',{
      headers: new Headers({
          'Authorization': 'token ' + token,
          }),
        }, {method : 'GET'})
      // Parse the response as JSON
      .then(res => res.json())
      .then(res =>{
        var githubName = `${res.login}`;
        var githubPicture = `${res.avatar_url}`;
        const NameRepo = document.createTextNode(respositoryName)
        document.getElementById("TitleRepo").appendChild(NameRepo)
        const ProfilePicture = document.createElement("img")
        ProfilePicture.setAttribute("style","width:70px;height:70px;")
        ProfilePicture.setAttribute("class", "img-thumbnail")
        ProfilePicture.src = githubPicture;

        document.getElementById("ProPic").appendChild(ProfilePicture)
        getMongoData(`${res.login}`);
      })

      $('#fake-link-1').click(function(){
      	var urlString = window.location.search;
      	urlSplit = urlString.split("access_token=");
      	accessToken = urlSplit[1];
      	fetch('http://localhost:8001/welcome/?accessToken='+accessToken, { method:"GET", redirect:"follow" }).then( res => {
      		if (res.redirected) {
                  window.location.href = res.url;
              } })
      })
  </script>
</html>
